‚ùØ fastfetch
          ‚ñó‚ñÑ‚ñÑ‚ñÑ       ‚ñó‚ñÑ‚ñÑ‚ñÑ‚ñÑ    ‚ñÑ‚ñÑ‚ñÑ‚ññ             dx5@nixos
          ‚ñú‚ñà‚ñà‚ñà‚ñô       ‚ñú‚ñà‚ñà‚ñà‚ñô  ‚ñü‚ñà‚ñà‚ñà‚ñõ             ---------
           ‚ñú‚ñà‚ñà‚ñà‚ñô       ‚ñú‚ñà‚ñà‚ñà‚ñô‚ñü‚ñà‚ñà‚ñà‚ñõ              OS: NixOS 25.11 (Xantusia) x86_64
            ‚ñú‚ñà‚ñà‚ñà‚ñô       ‚ñú‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñõ               Host: Gemini Lake Pro PRO20EX 8GL (MS-AAC2) (1.0)
     ‚ñü‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñô ‚ñú‚ñà‚ñà‚ñà‚ñà‚ñõ     ‚ñü‚ñô         Kernel: Linux 6.12.63
    ‚ñü‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñô ‚ñú‚ñà‚ñà‚ñà‚ñô    ‚ñü‚ñà‚ñà‚ñô        Uptime: 11 mins
           ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ññ           ‚ñú‚ñà‚ñà‚ñà‚ñô  ‚ñü‚ñà‚ñà‚ñà‚ñõ        Packages: 1187 (nix-system), 931 (nix-user), 14 (flatpak)
          ‚ñü‚ñà‚ñà‚ñà‚ñõ             ‚ñú‚ñà‚ñà‚ñõ ‚ñü‚ñà‚ñà‚ñà‚ñõ         Shell: zsh 5.9
         ‚ñü‚ñà‚ñà‚ñà‚ñõ               ‚ñú‚ñõ ‚ñü‚ñà‚ñà‚ñà‚ñõ          Display (AIO PC): 1600x900 in 19", 60 Hz [Built-in]
‚ñü‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñõ                  ‚ñü‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñô    WM: niri (Wayland)
‚ñú‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñõ                  ‚ñü‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñõ    Theme: Adwaita-dark [GTK2/3/4]
      ‚ñü‚ñà‚ñà‚ñà‚ñõ ‚ñü‚ñô               ‚ñü‚ñà‚ñà‚ñà‚ñõ             Icons: Papirus-Dark [GTK2/3/4]
     ‚ñü‚ñà‚ñà‚ñà‚ñõ ‚ñü‚ñà‚ñà‚ñô             ‚ñü‚ñà‚ñà‚ñà‚ñõ              Cursor: Bibata-Modern-Classic
    ‚ñü‚ñà‚ñà‚ñà‚ñõ  ‚ñú‚ñà‚ñà‚ñà‚ñô           ‚ñù‚ñÄ‚ñÄ‚ñÄ‚ñÄ               Terminal: alacritty 0.16.1
    ‚ñú‚ñà‚ñà‚ñõ    ‚ñú‚ñà‚ñà‚ñà‚ñô ‚ñú‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñõ         Terminal Font: JetBrainsMono Nerd Font (11.0pt)
     ‚ñú‚ñõ     ‚ñü‚ñà‚ñà‚ñà‚ñà‚ñô ‚ñú‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñõ          CPU: Intel(R) Celeron(R) N4000 (2) @ 2.60 GHz
           ‚ñü‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñô       ‚ñú‚ñà‚ñà‚ñà‚ñô                GPU: Intel UHD Graphics 600 @ 0.65 GHz [Integrated]
          ‚ñü‚ñà‚ñà‚ñà‚ñõ‚ñú‚ñà‚ñà‚ñà‚ñô       ‚ñú‚ñà‚ñà‚ñà‚ñô               Memory: 823.06 MiB / 7.56 GiB (11%)
         ‚ñü‚ñà‚ñà‚ñà‚ñõ  ‚ñú‚ñà‚ñà‚ñà‚ñô       ‚ñú‚ñà‚ñà‚ñà‚ñô              Swap: 0 B / 3.78 GiB (0%)
         ‚ñù‚ñÄ‚ñÄ‚ñÄ    ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñò       ‚ñÄ‚ñÄ‚ñÄ‚ñò              Disk (/): 20.56 GiB / 232.69 GiB (9%) - ext4
                                               Local IP (wlo1): 192.168.43.198/24
                                               Locale: en_US.UTF-8


‚ùØ cat configuration.nix
{ config, pkgs, lib, ... }:

{
  # ---------------------------------------------------------
  imports =
    [
      ./hardware-configuration.nix
      <home-manager/nixos>
    ];

  home-manager = {
    useGlobalPkgs = true;
    useUserPackages = true;
    users.dx5 = import ./home.nix;
    backupFileExtension = "backup";
  };

  # ---------------------------------------------------------
  boot = {
    loader = {
      systemd-boot.enable = true;
      efi.canTouchEfiVariables = true;
      systemd-boot.configurationLimit = 5;
    };
    kernelParams = [ "quiet" "splash"  ];
    consoleLogLevel = 0;
  };


  # ---------------------------------------------------------

  security.apparmor.enable = true;

  boot.kernel.sysctl = {
    "kernel.dmesg_restrict" = 1;
    "kernel.kptr_restrict" = 2;
    "net.ipv4.conf.all.accept_redirects" = 0;
    "net.ipv4.conf.default.accept_redirects" = 0;
  };


  # ---------------------------------------------------------
  hardware = {
    graphics = {
      enable = true;
      enable32Bit = true;
      extraPackages = with pkgs; [
        intel-media-driver
        libvdpau-va-gl
        intel-compute-runtime
      ];
    };
    cpu.intel.updateMicrocode = true;
  };


  services.thermald.enable = true;

  zramSwap.enable = true;

  services.fstrim.enable = true;


  # ---------------------------------------------------------
  networking = {
    hostName = "nixos";
    networkmanager.enable = true;

    # --- EKLEME: G√úVENLƒ∞K DUVARI ---
    firewall = {
      enable = true;
      allowedTCPPorts = [];
    };

    #  Quad9
    nameservers = [ "9.9.9.9" "149.112.112.112" ];
  };

  # DNS isteklerini ≈üifrelemek i√ßin (systemd-resolved kullanƒ±mƒ±)
  services.resolved = {
    enable = true;
    dnssec = "true";
    domains = [ "~." ];
    fallbackDns = [ "1.1.1.1" ];
    dnsovertls = "true";
  };

  time.timeZone = "Europe/Istanbul";
  i18n.defaultLocale = "en_US.UTF-8";
  console.keyMap = "trq";

  # ---------------------------------------------------------
  users.users.dx5 = {
    isNormalUser = true;
    description = "dx5";
    extraGroups = [ "networkmanager" "wheel" "video" "audio" "input" ]; # 'input' libinput i√ßin iyidir
    shell = pkgs.zsh;
  };

  nixpkgs.config.allowUnfree = true;

  # ---------------------------------------------------------
  programs.niri.enable = true;

xdg.portal = {
    enable = true;
    xdgOpenUsePortal = true; # XDG-Open komutunu portala y√∂nlendir

    # Gereksiz paket karma≈üasƒ±nƒ± √∂nlemek i√ßin sadece GTK y√ºkl√ºyoruz
    extraPortals = [
      pkgs.xdg-desktop-portal-gtk
      pkgs.xdg-desktop-portal-gnome # Bazen ayarlar (dark mode) i√ßin bu da gerekebilir, kalsƒ±n.
    ];

    # BURASI KRƒ∞Tƒ∞K: Niri (ve diƒüerleri) i√ßin varsayƒ±lanƒ± zorla
    config = {
      common = {
        default = [ "gtk" ];
      };
      niri = {
        default = [ "gtk" ];
      };
    };
  };



security.polkit.enable = true;
programs.zsh.enable = true;

  security.rtkit.enable = true;
  services.pipewire = {
    enable = true;
    alsa.enable = true;
    alsa.support32Bit = true;
    pulse.enable = true;
    wireplumber.enable = true;
  };



  fonts.packages = with pkgs; [
    nerd-fonts.jetbrains-mono
    font-awesome
  ];

  # ---------------------------------------------------------
  nix = {
    settings = {
      auto-optimise-store = true;
      experimental-features = [ "nix-command" "flakes" ];
      max-jobs = "auto";
    };
    gc = {
      automatic = true;
      dates = "weekly";
      options = "--delete-older-than 7d";
    };
  };
  # ---------------------------------------------------------
  environment.systemPackages = with pkgs; [
    vim
    git
    curl
    wget
    pciutils
    lm_sensors
  ];


  #----------------------------------------------------------

  system.stateVersion = "25.11";
}
/etc/nixosüîí
‚ùØ cat home.nix
{ config, pkgs, lib, ... }:

{
imports = [
    ./modules/nvim.nix   # ƒ∞≈üte burada dosyayƒ± i√ßeri alƒ±yoruz
    ./modules/yazi.nix
    ./modules/firefox.nix
  ];

  # ---------------------------------------------------------
  home.username = "dx5";
  home.homeDirectory = "/home/dx5";
  home.stateVersion = "25.11";

  programs.home-manager.enable = true;

  # ---------------------------------------------------------
  # 2. TEMEL Sƒ∞STEM ARA√áLARI & BAƒûIMLILIKLAR
  # ---------------------------------------------------------
  home.packages = with pkgs; [
    btop
    polkit_gnome
    pamixer
    brightnessctl
    zoxide
    imagemagick
    fastfetch
    tree
    # -- Grafik Aray√ºz Gereksinimleri --
    wl-clipboard # Panoya kopyalama (Alacritty/Neovim i√ßin ≈üart)
    libnotify    # Bildirim g√∂nderme aracƒ±
    kdePackages.okular
    kdePackages.gwenview
    steam-run
    temurin-bin-11
    xfce.thunar
    xfce.thunar-archive-plugin
    timewarrior
    waybar

   # --- Nƒ∞Rƒ∞ ARA√áLARI
    swaylock
    swayidle
    wl-clipboard
    mako
    grim
    slurp
    swaybg # Eƒüer duvar kaƒüƒ±dƒ± kullanacaksan
    xwayland-satellite # niri wm i√ßin
  ];



  #----------------------------------------------------------
  home.pointerCursor = {
    name = "Bibata-Modern-Ice";  # ƒ∞stediƒüin tema adƒ±
    package = pkgs.bibata-cursors;
    size = 24;                   # Boyut (√áok √∂nemli!)

    # Hem X11 (Alacritty/Firefox bazen buraya bakar)
    # Hem GTK (Brave/Files) i√ßin ayarlarƒ± √ºret
    gtk.enable = true;
    x11.enable = true;
  };

  # 2. ƒ∞nat√ßƒ± uygulamalar i√ßin Ortam Deƒüi≈ükenleri
  home.sessionVariables = {
    # Wayland ve X11 uygulamalarƒ±na boyutu zorla
    XCURSOR_THEME = "Bibata-Modern-Ice";
    XCURSOR_SIZE = "24";
    HYPRCURSOR_THEME = "Bibata-Modern-Ice"; # Bazƒ± modern appler buna bakar
    HYPRCURSOR_SIZE = "24";

    EDITOR = "nvim";
    VISUAL = "nvim";

    WINIT_UNIX_BACKEND = "wayland";


  };

  # ---------------------------------------------------------
  # 5. LAUNCHER (Fuzzel)
  # ---------------------------------------------------------
  programs.fuzzel = {
    enable = true;
    settings = {
      main = {
        terminal = "${pkgs.alacritty}/bin/alacritty";
        layer = "overlay";
        width = 40;
        font = "JetBrainsMono Nerd Font:size=11";
        line-height = 20;
        fields = "name,generic,comment,categories,filename,keywords";
        show-actions = true;
      };
      colors = {
        background = "1e1e2eff"; # Koyu tema (Catppuccin vari)
        text = "cdd6f4ff";
        match = "f38ba8ff";
        selection = "585b70ff";
        selection-text = "cdd6f4ff";
      };
    };
  };

  # ---------------------------------------------------------

 # ---------------------------------------------------------
  programs.alacritty = {
    enable = true;

    settings = {
      env.TERM = "xterm-256color";
      window = {
        decorations = "none";
        opacity = 0.90;
        padding = { x = 5; y = 5; };
      };
      selection.save_to_clipboard = true;

      font = {
        normal = { family = "JetBrainsMono Nerd Font"; style = "Regular"; };
        size = 11.0;
      };
    };
  };

 # ---------------------------------------------------------
  # 8. ZELLIJ (Basit & Etkili)
  # ---------------------------------------------------------
  programs.zellij = {
    enable = true;
  };

  # ---------------------------------------------------------
  # 10. SHELL (Zsh + Starship - Optimize Edilmi≈ü)
  # ---------------------------------------------------------
  programs.zsh = {
    enable = true;
    syntaxHighlighting.enable = true;
    autosuggestion.enable = true;
    enableCompletion = true;

    initContent = ''
      eval "$(zoxide init zsh)"
    '';

    shellAliases = {
      l = "ls -la";
      c = "clear";
      nixconf = "sudo nvim /etc/nixos/configuration.nix";
      homeconf = "sudo nvim /etc/nixos/home.nix";
      swayconf = "sudo nvim /etc/nixos/sway.conf"; # Sway ayar dosyasƒ±
      sysup = "sudo nixos-rebuild switch";
    };
    history = {
      size = 5000; # √áok b√ºy√ºk history a√ßƒ±lƒ±≈üƒ± yava≈ülatabilir
      share = true;
    };
  };

  programs.starship = {
    enable = true;
    enableZshIntegration = true;
    settings = {
      add_newline = false;
      aws.disabled = true;
      gcloud.disabled = true;
      kubernetes.disabled = true;
      package.disabled = true; # Paket versiyonunu g√∂stermek bazen yava≈ütƒ±r
    };
  };

  # ---------------------------------------------------------
  # 11. G√ñR√úN√úM (GTK & Cursor)
  # ---------------------------------------------------------
  gtk = {
    enable = true;
    theme = {
      name = "Adwaita-dark"; # En stabil ve hafif koyu tema
      package = pkgs.gnome-themes-extra;
    };
    iconTheme = {
      name = "Papirus-Dark";
      package = pkgs.papirus-icon-theme;
    };
    cursorTheme = {
      name = "Bibata-Modern-Classic"; # ≈ûƒ±k ve modern
      package = pkgs.bibata-cursors;
    };
  };
}
/etc/nixosüîí
‚ùØ cd modules
/etc/nixos/modulesüîí
‚ùØ cat nvim.nix
 { pkgs, ... }:
{
  programs.neovim = {
    enable = true;
    package = pkgs.neovim-unwrapped;
    defaultEditor = true;
    viAlias = true;
    vimAlias = true;

    extraPackages = with pkgs; [
      gcc     # Treesitter i√ßin ≈üart
      gnumake # Bazƒ± pluginler ister
      unzip   # ƒ∞ndirmeler i√ßin
      ripgrep # Teleskope (arama) i√ßin ≈üart
      fd      # Dosya bulucu
      fzf
      gzip

      lazygit
      nodejs_22
      tree-sitter
      typescript-language-server  # JS ve TS i√ßin
      vscode-langservers-extracted # HTML, CSS, JSON i√ßin
      lua-language-server         # Lua i√ßin
      tailwindcss-language-server
      nil
      nodePackages.prettier
      stylua
      biome
      emmet-ls
    ];
  };

}
/etc/nixos/modulesüîí
‚ùØ cat firefox.nix
{pkgs, ...}:
{
programs.firefox = {
    enable = true;

    policies = {
      DisableTelemetry = true;
      DisableFirefoxStudies = true;
      DisablePocket = true;
      DisableFirefoxAccounts = true;

      EnableTrackingProtection = {
        Value = true;
        Locked = false; # Kƒ∞Lƒ∞Dƒ∞ KALDIRIYORUZ! (Arkenfox y√∂netebilsin)
        Cryptomining = true;
        Fingerprinting = true; # Yazƒ±m d√ºzeltildi (k√º√ß√ºk 'p')
      };

      DNSOverHTTPS = {
        Enabled = true;
        ProviderURL = "https://mozilla.cloudflare-dns.com/dns-query";
        Locked = false; # ƒ∞stersen aray√ºzden deƒüi≈ütirebil diye kilidi a√ßƒ±yoruz
      };

      # HTTPS Zorlama (G√ºvenlik i√ßin eklemeni √∂neririm)
      HttpsOnlyMode = "force_enabled";
    };
  };

programs.brave = {
    enable = true;
};
}
/etc/nixos/modulesüîí
‚ùØ cat yazi.nix
{pkgs, ...}:
{
programs.yazi = {
    enable = true;
    enableZshIntegration = true;

    settings = {
      manager = {
        ratio = [ 1 2 3 ];
        sort_by = "natural";
        sort_sensitive = true;
        sort_reverse = false;
        sort_dir_first = true;
        linemode = "none";
        show_hidden = true;
        show_symlink = true;
      };

      preview = {
        image_filter = "lanczos3";
        image_quality = 80; # N4000 i√ßin 90 yerine 80 daha akƒ±cƒ± olur
        tab_size = 2;
        max_width = 600;
        max_height = 900;
        ueberzug_scale = 1;
        ueberzug_offset = [ 0 0 0 0 ];
      };

      tasks = {
        micro_workers = 2; # K√º√ß√ºk i≈üler (icon y√ºkleme vs)
        macro_workers = 2; # B√ºy√ºk i≈üler (dosya kopyalama, √∂nizleme √ºretme)
        bizarre_retry = 3;
      };
    };
  };
  }
